(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5250],{14758:function(e,t,n){"use strict";var a,r=n(2784);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}t.Z=function(e){return /*#__PURE__*/r.createElement("svg",i({width:15,height:15,viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=/*#__PURE__*/r.createElement("path",{d:"M4.5 6.5L1.328 9.672a2.828 2.828 0 104 4L8.5 10.5m2-2l3.172-3.172a2.829 2.829 0 00-4-4L6.5 4.5m-2 6l6-6",fill:"none",stroke:"currentColor"})))}},17381:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(66700),r=n(19785);function i(e){return(0,r.Z)(1,arguments),Math.floor(function(e){return(0,r.Z)(1,arguments),(0,a.Z)(e).getTime()}(e)/1e3)}},35174:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/team/create",function(){return n(20306)}])},3688:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a,r=n(47842),i=n(52322),o=n(2784),s=n(45932),l=n(6039),c=/*#__PURE__*/n.n(l),u=(a={},(0,r.Z)(a,s.hT.CREATE_SURVEY_INCOMPLETE,[s.lp.CREATE_TEAM,s.lp.INVITE_MEMBERS,s.lp.PREFERENCES,s.lp.USE_CASES,s.lp.TOOLS]),(0,r.Z)(a,s.hT.CREATE_SURVEY_COMPLETE,[s.lp.CREATE_TEAM,s.lp.INVITE_MEMBERS]),(0,r.Z)(a,s.hT.JOIN_EXISTING_TEAM,[s.lp.PREFERENCES,s.lp.USE_CASES,s.lp.TOOLS]),a),m=/*#__PURE__*/(0,o.memo)(function(e){var t=e.step,n=e.flow,a=u[void 0===n?s.hT.CREATE_SURVEY_INCOMPLETE:n];return/*#__PURE__*/(0,i.jsxs)("div",{className:c().signUpStepInfo,children:[String(a.indexOf(t)+1)," of ",a.length]})})},52012:function(e,t,n){"use strict";n.d(t,{My:function(){return E},Qb:function(){return p},p9:function(){return f}});var a=n(98788),r=n(50853),i=n(5632),o=/*#__PURE__*/n.n(i),s=n(42541),l=n(90581),c=n(17381),u=n(99669),m={defaultTTL:86400},d=new/*#__PURE__*/(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;(0,l.Z)(this,e),this._storage=t,this._options=n}var t=e.prototype;return t.setItem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._options.defaultTTL,a=(0,c.Z)(new Date);this._storage.setItem(e,{value:t,exp:a+n})},t.getItem=function(e){var t=this._storage.getItem(e);if(null==t||"object"!=typeof t)return t;if(!Reflect.has(t,"value")||!Reflect.has(t,"exp"))return console.warn('ExpiryLocalStorage.getItem("'.concat(e,'") - data is malformed'),t),null;var n=(0,c.Z)(new Date);return n>t.exp?(console.debug('ExpiryLocalStorage.getItem("'.concat(e,'") - data has expired ').concat(n-t.exp," seconds ago")),this._storage.removeItem(e),null):t.value},t.removeItem=function(e){this._storage.removeItem(e)},t.clear=function(){this._storage.clear()},e}())(u.J),h="auth/redirect";function f(e){d.setItem(h,e,900)}function E(){return d.getItem(h)}function p(e,t){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)(function(e,t){var n;return(0,r.__generator)(this,function(a){switch(a.label){case 0:if(n=E(),console.debug("Redirect to ".concat(null!=n?n:e)),!n)return[3,2];return d.removeItem(h),s.Z.trackEvent("login-page","redirect_to_saved_path",{source:t,url:n,workspaceId:n.split("/")[2]}),[4,o().replace(n)];case 1:return a.sent(),[3,4];case 2:return[4,o().replace(e)];case 3:a.sent(),a.label=4;case 4:return[2]}})})).apply(this,arguments)}},20306:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var a,r,i=n(87394),o=n(52322),s=n(2784),l=n(5632),c=n(11269),u=n(96933),m=n(66161),d=n(45932),h=n(59858),f=n(42541),E=n(48617),p=n(3688),v=n(70865),_=n(96670),g=n(63955),T=n(89484),x=n(55929),b=n(95162),I=n(10380),Z=n(94254),w=n(30739),C=/*#__PURE__*/(0,s.memo)(function(e){var t=e.className,n=e.onTeamCreated,a=(0,g.cI)({reValidateMode:"onChange"}),r=a.register,i=a.formState,s=a.handleSubmit,l=i.errors,c=i.submitCount,u=(0,T.K)({onSuccess:n}),m=u.canCreateTeam,d=u.isLoadingCreateTeamCheck,h=u.handleCreateTeam,f=u.error,E=u.loading,p=u.defaultTeamName;return/*#__PURE__*/(0,o.jsxs)(o.Fragment,{children:[/*#__PURE__*/(0,o.jsx)("form",{id:"create-team-form",onSubmit:s(h),children:/*#__PURE__*/(0,o.jsx)(I.Z,{className:t,children:/*#__PURE__*/(0,o.jsx)(x.Z,(0,_.Z)((0,v.Z)({size:x.Z.Sizes.LARGE,label:"Team Name",placeholder:"Team Name",autoFocus:!0,defaultValue:p},r("name",{required:!0,minLength:1,maxLength:64})),{error:l.name,touched:c>0}))})}),/*#__PURE__*/(0,o.jsx)(Z.Z,{children:/*#__PURE__*/(0,o.jsx)(b.ZP,{form:"create-team-form","data-testid":"create-team-btn",variant:b.ZP.Variants.REGULAR,size:b.ZP.Sizes.X_LARGE,isLoading:E,disabled:!m||d,type:"submit",children:"Continue"})}),/*#__PURE__*/(0,o.jsx)(w.Z,{error:null==f?void 0:f.message})]})});function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var j=function(e){return /*#__PURE__*/s.createElement("svg",S({width:15,height:15,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=/*#__PURE__*/s.createElement("g",{fill:"var(--green-success)"},/*#__PURE__*/s.createElement("path",{d:"M5.5 0a3.499 3.499 0 100 6.996A3.499 3.499 0 105.5 0zM3.5 8.994a3.5 3.5 0 00-3.5 3.5v2.497h11v-2.497a3.5 3.5 0 00-3.5-3.5h-4zM12.5 10H12v5h3v-2.5a2.5 2.5 0 00-2.5-2.5z"}),/*#__PURE__*/s.createElement("path",{d:"M11.5 4a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"}))))},L=/*#__PURE__*/(0,s.memo)(function(e){var t=e.onTeamCreated,n=(0,h.Z)(),a=(0,u.aF)(),r=!!(null==a?void 0:a.surveyData);return(0,s.useEffect)(function(){f.Z.trackEvent("team_creation","step",{name:"team_name"})},[]),/*#__PURE__*/(0,o.jsxs)(E.Z,{label:"Team Name",labelIcon:/*#__PURE__*/(0,o.jsx)(j,{}),title:"What should we call your team?",footer:(null==n?void 0:n.length)?/*#__PURE__*/(0,o.jsxs)(o.Fragment,{children:["Or ",/*#__PURE__*/(0,o.jsx)("a",{href:"/team/join",children:"join existing team"})," instead"]}):null,children:[/*#__PURE__*/(0,o.jsx)("p",{children:"You can always change this later from settings."}),/*#__PURE__*/(0,o.jsx)(C,{onTeamCreated:t}),/*#__PURE__*/(0,o.jsx)(p.Z,{step:d.lp.CREATE_TEAM,flow:r?d.hT.CREATE_SURVEY_COMPLETE:d.hT.CREATE_SURVEY_INCOMPLETE})]})}),R=n(69023),y=n(11929),M=n(95550),O=n(44784),N=n(53220),k=n(84054),A=n(52012),P=n(96737),V=n(34224),U=n(2595),z=n(14758),F=n(89038);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var G=function(e){return /*#__PURE__*/s.createElement("svg",B({width:16,height:15,viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=/*#__PURE__*/s.createElement("g",{fill:"var(--green-success)"},/*#__PURE__*/s.createElement("path",{d:"M15.454.71a.5.5 0 01-.1.144L5.9 10.306l2.67 4.451a.5.5 0 00.889-.06L15.454.71zM5.194 9.6L.743 6.928a.5.5 0 01.06-.889L14.793.045a.5.5 0 00-.146.101L5.194 9.6z"}))))},Y=n(70620),X=/*#__PURE__*/n.n(Y),D=/*#__PURE__*/(0,s.memo)(function(e){var t=e.teamId,n=(0,l.useRouter)(),a=(0,V.Z)(),r=(0,U.Z)(),i=(0,u.aF)(),c=!!(null==i?void 0:i.surveyData),m=(0,P._)({entityType:M.FU.Team,entityId:t}),h=(0,g.cI)({mode:"onSubmit"}),T=h.register,x=h.formState,w=h.handleSubmit,C=h.reset;(0,s.useEffect)(function(){f.Z.trackEvent("team_creation","step",{name:"invite"})},[]),(0,s.useEffect)(function(){m.isEnabled||m.onTurnOn()},[m.isEnabled,m.onTurnOn]);var S=(0,s.useCallback)(function(){f.Z.trackEvent("team_share_dialog","copy_link_click"),a(m.inviteLink)},[m.inviteLink]),j=(0,s.useCallback)(function(){if(!c){n.push("/user/survey");return}(0,A.Qb)("/dashboard/all","team_create")},[c,n.push]),L=(0,y.UK)(function(e){var n=e.email;r.promise((0,k.Z)({type:M.PA.Email,inviteTo:M.FU.Team,status:M.aj.Pending,teamId:t,inviterId:i.id,inviteeEmail:n},"team_creation"),{loading:"Inviting ".concat(n),success:"Invitation sent to ".concat(n),error:function(e){return(0,N.Tb)(Error("Failed to invite user",{cause:e})),"Invitation sending failed"}}),C()}).execute;return/*#__PURE__*/(0,o.jsxs)(E.Z,{className:X().inviteMembersView,label:"Invite Teammates",labelIcon:/*#__PURE__*/(0,o.jsx)(G,{}),title:"Who do you collaborate with?",children:[/*#__PURE__*/(0,o.jsx)("p",{children:"Invite teammates. Everyone will have access to the same dashboard"}),/*#__PURE__*/(0,o.jsx)("form",{onSubmit:w(L),children:/*#__PURE__*/(0,o.jsxs)(I.Z,{children:[/*#__PURE__*/(0,o.jsx)(F.Z,(0,_.Z)((0,v.Z)({size:F.Z.Sizes.LARGE,label:"Invite Teammate",placeholder:"Email address",type:"email",autoComplete:"email"},T("email",{required:!0,validate:O.Le})),{button:/*#__PURE__*/(0,o.jsx)(b.ZP,{className:X().inviteBtn,size:b.ZP.Sizes.LARGE,disabled:!x.isValid,onClick:w(L),children:"Invite"}),autoFocus:!0})),/*#__PURE__*/(0,o.jsx)("p",{children:/*#__PURE__*/(0,o.jsxs)("a",{className:X().copyLink,onClick:S,children:[/*#__PURE__*/(0,o.jsx)(z.Z,{}),"Copy invite link"]})})]})}),/*#__PURE__*/(0,o.jsx)(Z.Z,{children:/*#__PURE__*/(0,o.jsx)(b.ZP,{"data-testid":"end-invite-members-btn",size:b.ZP.Sizes.X_LARGE,onClick:j,children:c?"Create Team":"Continue"})}),/*#__PURE__*/(0,o.jsx)(p.Z,{step:d.lp.INVITE_MEMBERS,flow:c?d.hT.CREATE_SURVEY_COMPLETE:d.hT.CREATE_SURVEY_INCOMPLETE})]})}),K=function(){var e=(0,s.useState)(),t=e[0],n=e[1],a=(0,i.Z)((0,c.p3)(),2),r=(a[0],a[1]),d=(0,l.useRouter)(),h=(0,u.aF)(),f=(0,s.useCallback)(function(e){r(e.id),n(e)},[r]);return d.isReady&&h?/*#__PURE__*/(0,o.jsx)(m.Z,{hideSplashOnLoad:!0,children:/*#__PURE__*/(0,o.jsx)(R.Z,{staticLogo:!0,children:t?/*#__PURE__*/(0,o.jsx)(D,{teamId:t.id}):/*#__PURE__*/(0,o.jsx)(L,{onTeamCreated:f})})}):null}},70620:function(e){e.exports={inviteMembersView:"InviteMembersView_inviteMembersView__5KFON",copyLink:"InviteMembersView_copyLink__31kg8",inviteBtn:"InviteMembersView_inviteBtn__fp20_"}},6039:function(e){e.exports={signUpStepInfo:"SignUpStepInfo_signUpStepInfo__FGUMO"}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[2888],function(){return t(53078),t(35174)}),_N_E=e.O()}]);